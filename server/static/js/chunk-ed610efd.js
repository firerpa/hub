import{_ as bt,f as wt,a as St}from"./chunk-a19e325c.js";import{n as v,I as Se,s as _t,x as kt,d as Me,y as Ie,i as p,z as Pt,j as ft,c as M,o as b,m as F,l as w,F as G,A as E,k as ee,a as x,q as S,w as ye,t as q,f as $,C as Mt,B as zt,g as J,h as $e,_ as _e,D as Tt,E as Le,P as Ot,p as Ct,e as Dt,G as Lt,H as Ee,r as xt,J as Ft,K as tt}from"./chunk-afca7c7e.js";import{H as Wt,g as Nt,c as At,d as Bt,a as Vt}from"./chunk-4eb5bf64.js";import{u as It}from"./chunk-f5e27094.js";import{_ as Y}from"./chunk-de513c4d.js";import{a as je}from"./chunk-1c9c11ae.js";import{i as Re}from"./chunk-eaabfa5b.js";var Rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M270.1 741.7c0 23.4 19.1 42.5 42.6 42.5h48.7v120.4c0 30.5 24.5 55.4 54.6 55.4 30.2 0 54.6-24.8 54.6-55.4V784.1h85v120.4c0 30.5 24.5 55.4 54.6 55.4 30.2 0 54.6-24.8 54.6-55.4V784.1h48.7c23.5 0 42.6-19.1 42.6-42.5V346.4h-486v395.3zm357.1-600.1l44.9-65c2.6-3.8 2-8.9-1.5-11.4-3.5-2.4-8.5-1.2-11.1 2.6l-46.6 67.6c-30.7-12.1-64.9-18.8-100.8-18.8-35.9 0-70.1 6.7-100.8 18.8l-46.6-67.5c-2.6-3.8-7.6-5.1-11.1-2.6-3.5 2.4-4.1 7.4-1.5 11.4l44.9 65c-71.4 33.2-121.4 96.1-127.8 169.6h486c-6.6-73.6-56.7-136.5-128-169.7zM409.5 244.1a26.9 26.9 0 1126.9-26.9 26.97 26.97 0 01-26.9 26.9zm208.4 0a26.9 26.9 0 1126.9-26.9 26.97 26.97 0 01-26.9 26.9zm223.4 100.7c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4 30.2 0 54.6-24.8 54.6-55.4V400.1c.1-30.6-24.3-55.3-54.6-55.3zm-658.6 0c-30.2 0-54.6 24.8-54.6 55.4v216.4c0 30.5 24.5 55.4 54.6 55.4 30.2 0 54.6-24.8 54.6-55.4V400.1c0-30.6-24.5-55.3-54.6-55.3z"}}]},name:"android",theme:"filled"};function at(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),l.forEach(function(s){Et(e,s,t[s])})}return e}function Et(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var Ue=function(a,t){var l=at({},a,t.attrs);return v(Se,at({},l,{icon:Rt}),null)};Ue.displayName="AndroidFilled";Ue.inheritAttrs=!1;var $t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M917.7 148.8l-42.4-42.4c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-76.1 76.1a199.27 199.27 0 00-112.1-34.3c-51.2 0-102.4 19.5-141.5 58.6L432.3 308.7a8.03 8.03 0 000 11.3L704 591.7c1.6 1.6 3.6 2.3 5.7 2.3 2 0 4.1-.8 5.7-2.3l101.9-101.9c68.9-69 77-175.7 24.3-253.5l76.1-76.1c3.1-3.2 3.1-8.3 0-11.4zM769.1 441.7l-59.4 59.4-186.8-186.8 59.4-59.4c24.9-24.9 58.1-38.7 93.4-38.7 35.3 0 68.4 13.7 93.4 38.7 24.9 24.9 38.7 58.1 38.7 93.4 0 35.3-13.8 68.4-38.7 93.4zm-190.2 105a8.03 8.03 0 00-11.3 0L501 613.3 410.7 523l66.7-66.7c3.1-3.1 3.1-8.2 0-11.3L441 408.6a8.03 8.03 0 00-11.3 0L363 475.3l-43-43a7.85 7.85 0 00-5.7-2.3c-2 0-4.1.8-5.7 2.3L206.8 534.2c-68.9 69-77 175.7-24.3 253.5l-76.1 76.1a8.03 8.03 0 000 11.3l42.4 42.4c1.6 1.6 3.6 2.3 5.7 2.3s4.1-.8 5.7-2.3l76.1-76.1c33.7 22.9 72.9 34.3 112.1 34.3 51.2 0 102.4-19.5 141.5-58.6l101.9-101.9c3.1-3.1 3.1-8.2 0-11.3l-43-43 66.7-66.7c3.1-3.1 3.1-8.2 0-11.3l-36.6-36.2zM441.7 769.1a131.32 131.32 0 01-93.4 38.7c-35.3 0-68.4-13.7-93.4-38.7a131.32 131.32 0 01-38.7-93.4c0-35.3 13.7-68.4 38.7-93.4l59.4-59.4 186.8 186.8-59.4 59.4z"}}]},name:"api",theme:"outlined"};function it(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),l.forEach(function(s){jt(e,s,t[s])})}return e}function jt(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var He=function(a,t){var l=it({},a,t.attrs);return v(Se,it({},l,{icon:$t}),null)};He.displayName="ApiOutlined";He.inheritAttrs=!1;var Ut={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"};function nt(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),l.forEach(function(s){Ht(e,s,t[s])})}return e}function Ht(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var Xe=function(a,t){var l=nt({},a,t.attrs);return v(Se,nt({},l,{icon:Ut}),null)};Xe.displayName="ExportOutlined";Xe.inheritAttrs=!1;var Xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 328a60 60 0 10120 0 60 60 0 10-120 0zM852 64H172c-17.7 0-32 14.3-32 32v660c0 17.7 14.3 32 32 32h680c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-32 660H204V128h616v596zM604 328a60 60 0 10120 0 60 60 0 10-120 0zm250.2 556H169.8c-16.5 0-29.8 14.3-29.8 32v36c0 4.4 3.3 8 7.4 8h729.1c4.1 0 7.4-3.6 7.4-8v-36c.1-17.7-13.2-32-29.7-32zM664 508H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"robot",theme:"outlined"};function ot(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),l.forEach(function(s){Yt(e,s,t[s])})}return e}function Yt(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var We=function(a,t){var l=ot({},a,t.attrs);return v(Se,ot({},l,{icon:Xt}),null)};We.displayName="RobotOutlined";We.inheritAttrs=!1;var Gt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"};function rt(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),l.forEach(function(s){qt(e,s,t[s])})}return e}function qt(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var Ye=function(a,t){var l=rt({},a,t.attrs);return v(Se,rt({},l,{icon:Gt}),null)};Ye.displayName="ThunderboltOutlined";Ye.inheritAttrs=!1;var Jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M447.8 588.8l-7.3-32.5c-.2-1-.6-1.9-1.1-2.7a7.94 7.94 0 00-11.1-2.2L405 567V411c0-4.4-3.6-8-8-8h-81c-4.4 0-8 3.6-8 8v36c0 4.4 3.6 8 8 8h37v192.4a8 8 0 0012.7 6.5l79-56.8c2.6-1.9 3.8-5.1 3.1-8.3zm-56.7-216.6l.2.2c3.2 3 8.3 2.8 11.3-.5l24.1-26.2a8.1 8.1 0 00-.3-11.2l-53.7-52.1a8 8 0 00-11.2.1l-24.7 24.7c-3.1 3.1-3.1 8.2.1 11.3l54.2 53.7z"}},{tag:"path",attrs:{d:"M866.9 169.9L527.1 54.1C523 52.7 517.5 52 512 52s-11 .7-15.1 2.1L157.1 169.9c-8.3 2.8-15.1 12.4-15.1 21.2v482.4c0 8.8 5.7 20.4 12.6 25.9L499.3 968c3.5 2.7 8 4.1 12.6 4.1s9.2-1.4 12.6-4.1l344.7-268.6c6.9-5.4 12.6-17 12.6-25.9V191.1c.2-8.8-6.6-18.3-14.9-21.2zM810 654.3L512 886.5 214 654.3V226.7l298-101.6 298 101.6v427.6z"}},{tag:"path",attrs:{d:"M452 297v36c0 4.4 3.6 8 8 8h108v274h-38V405c0-4.4-3.6-8-8-8h-35c-4.4 0-8 3.6-8 8v210h-31c-4.4 0-8 3.6-8 8v37c0 4.4 3.6 8 8 8h244c4.4 0 8-3.6 8-8v-37c0-4.4-3.6-8-8-8h-72V493h58c4.4 0 8-3.6 8-8v-35c0-4.4-3.6-8-8-8h-58V341h63c4.4 0 8-3.6 8-8v-36c0-4.4-3.6-8-8-8H460c-4.4 0-8 3.6-8 8z"}}]},name:"verified",theme:"outlined"};function st(e){for(var a=1;a<arguments.length;a++){var t=arguments[a]!=null?Object(arguments[a]):{},l=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),l.forEach(function(s){Qt(e,s,t[s])})}return e}function Qt(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var Ge=function(a,t){var l=st({},a,t.attrs);return v(Se,st({},l,{icon:Jt}),null)};Ge.displayName="VerifiedOutlined";Ge.inheritAttrs=!1;const be=[{label:"域名",value:"domain"},{label:"插槽令牌",value:"token_id"},{label:"CPU",value:"cpu_count"},{label:"磁盘",value:"disk_total"},{label:"内存",value:"mem_total"},{label:"正在充电",value:"batt_charging"},{label:"接口可用",value:"api_available"},{label:"接口锁定",value:"locked"},{label:"正在被控",value:"controlling"},{label:"品牌",value:"brand"},{label:"设备",value:"device"},{label:"型号",value:"model"},{label:"架构",value:"abi"},{label:"系统版本",value:"sdk"},{label:"硬件类型",value:"hardware"},{label:"板载类型",value:"board"},{label:"版本",value:"version"},{label:"启动时间",value:"boot_time"},{label:"注册时间",value:"reg_time"},{label:"备注",value:"comment"},{label:"状态",value:"state"}],Kt=_t(),Zt=kt({id:"tab-key",state:()=>({activeKey:"1",defaultCheckedList:JSON.parse(localStorage.getItem("checklist")||'["state","domain","token_id","brand","abi","sdk","comment"]'),deviceDomain:""}),actions:{changeactiveKey(e){this.activeKey=e},changeCheckedList(e){localStorage.setItem("checklist",JSON.stringify(e)),this.defaultCheckedList=e},setDeviceDomain(e){this.deviceDomain=e}}});function U(){return Zt(Kt)}const ea={class:"table-area"},ta={key:0,class:"comment-cell"},aa={class:"comment-text"},ia={key:1,class:"edit-line"},na={key:0,style:{color:"#2ECC71"}},oa={key:1,style:{color:"#E74C3C"}},ra={key:2,style:{color:"#3498DB"}},sa=Me({__name:"List",setup(e,{expose:a}){var de;const t=Ie(()=>i.value-180),l=(de=je.getUser())==null?void 0:de.admin,s=p([]),{width:n,height:i}=It(),r=Ie(()=>n.value-200),d=p({current:1,pageSize:25,total:s.value.length,showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["25","50","100"],showTotal:k=>"共 "+k+" 条"}),h=Ie(()=>{const k=be.filter(f=>U().defaultCheckedList.includes(f.value)).map(f=>({title:f.label,dataIndex:f.value,key:f.value,width:180,fixed:void 0,sorter:!0}));return l&&k.push({title:"操作",dataIndex:"operation",fixed:"right",width:100,key:"operation",sorter:!1}),k}),o=p({sort:"",order:""}),c=p(!1);function u(k,f,z){d.value.current=k.current,d.value.pageSize=k.pageSize,o.value.sort=z.field,o.value.order=z.order?z.order=="ascend"?"asc":"desc":z.order,A()}const _=k=>({onClick:f=>{if(k.state==-1){J.error("没有设备连接该插槽");return}U().changeactiveKey("2"),U().setDeviceDomain(k.domain)}}),W=async k=>{var z,V;const f=await Bt(k);((z=f==null?void 0:f.data)==null?void 0:z.status)==0?(J.success("删除成功"),A()):J.error("删除失败："+((V=f==null?void 0:f.data)==null?void 0:V.message))},A=async k=>{k&&(d.value.current=k);try{c.value=!0;let f={page:d.value.current,size:d.value.pageSize};o.value.order&&Object.assign(f,{...o.value});const z=await Nt(f);z.data.data&&typeof z.data.data=="object"?(c.value=!1,s.value=z.data.data,d.value.total=z.data.total):(c.value=!1,s.value=[])}catch{c.value=!1}},P=p(!1),T=p(-1),B=p(""),N=(k,f)=>{T.value=k,B.value=f,P.value=!0},le=async k=>{var f,z;if(k==="save"&&T.value!==-1)try{const V=await At(s.value[T.value].domain,B.value);((f=V==null?void 0:V.data)==null?void 0:f.status)==0?(s.value[T.value].comment=B.value,J.success("修改成功")):J.error("修改失败："+((z=V==null?void 0:V.data)==null?void 0:z.message))}finally{ce()}else k==="cancel"&&ce()},ce=()=>{T.value=-1,B.value="",P.value=!1};return Pt(()=>{A()}),ft(()=>{}),a({getLists:A}),(k,f)=>{const z=F("a-tooltip"),V=F("a-input"),Q=F("a-button"),fe=F("a-popconfirm"),te=F("a-table");return b(),M("div",ea,[v(te,{columns:h.value,"data-source":s.value,pagination:d.value,scroll:{x:r.value,y:t.value},loading:c.value,onChange:u,customRow:_},{bodyCell:w(({text:I,record:he,index:me,column:H})=>[(I==null||I==="")&&H.key!="comment"&&H.key!="operation"?(b(),M(G,{key:0},[],64)):(b(),M(G,{key:1},[H.dataIndex==="comment"?(b(),M(G,{key:0},[!P.value||T.value!==me?(b(),M("div",ta,[v(z,{placement:"right"},{title:w(()=>[$(q(I||""),1)]),default:w(()=>[S(l)?(b(),ee(S(Wt),{key:0,class:"edit-icon",onClick:ye(ae=>N(me,he.comment),["stop"])},null,8,["onClick"])):E("",!0),x("span",aa,q(I||""),1)]),_:2},1024)])):(b(),M("div",ia,[v(V,{value:B.value,onClick:f[0]||(f[0]=ye(()=>{},["stop"])),onInput:f[1]||(f[1]=ye(ae=>B.value=ae.target.value,["stop"]))},null,8,["value"]),v(S(Mt),{class:"ico",onClick:f[2]||(f[2]=ye(ae=>le("save"),["stop"]))}),v(S(zt),{class:"ico",onClick:f[3]||(f[3]=ye(ae=>le("cancel"),["stop"]))})]))],64)):E("",!0),H.key=="state"?(b(),M(G,{key:1},[I==1?(b(),M("span",na,"在线")):E("",!0),I==0?(b(),M("span",oa,"离线")):E("",!0),I==-1?(b(),M("span",ra,"待用")):E("",!0)],64)):E("",!0),H.key=="operation"?(b(),ee(fe,{key:2,title:"确认要删除该设备槽位吗？","ok-text":"确定","cancel-text":"取消",onConfirm:()=>W(he.domain)},{default:w(()=>[v(Q,{type:"link",danger:"",onClick:f[4]||(f[4]=ye(()=>{},["stop"]))},{default:w(()=>[$("删除")]),_:1})]),_:2},1032,["onConfirm"])):E("",!0),["batt_charging","api_available","locked","controlling"].includes(H.key)?(b(),M(G,{key:3},[$(q(I?"是":"否"),1)],64)):E("",!0),["boot_time","reg_time"].includes(H.key)?(b(),M(G,{key:4},[$(q(S(Y).timestampToDate(I)),1)],64)):E("",!0),["boot_time","reg_time"].includes(H.key)?(b(),M(G,{key:5},[$(q(S(Y).timestampToDate(I)),1)],64)):E("",!0),["sdk"].includes(H.key)?(b(),M(G,{key:6},[$(q(S(Y).sdkToVersion(I)),1)],64)):E("",!0),["disk_total","mem_total"].includes(H.key)?(b(),M(G,{key:7},[$(q(S(Y).bytesTokmgbString(I)),1)],64)):E("",!0)],64))]),_:1},8,["columns","data-source","pagination","scroll","loading"])])}}}),la=$e(sa,[["__scopeId","data-v-d8b3ecb3"]]);var X={};(function(e){(function(a){/**
 * @license
 * MIT License:
 *
 * Copyright (c) 2010-2013, Joe Walnes
 *               2013-2018, Drew Noakes
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */Date.now=Date.now||function(){return new Date().getTime()};var t={extend:function(){arguments[0]=arguments[0]||{};for(var n=1;n<arguments.length;n++)for(var i in arguments[n])arguments[n].hasOwnProperty(i)&&(typeof arguments[n][i]=="object"?arguments[n][i]instanceof Array?arguments[0][i]=arguments[n][i]:arguments[0][i]=t.extend(arguments[0][i],arguments[n][i]):arguments[0][i]=arguments[n][i]);return arguments[0]},binarySearch:function(n,i){for(var r=0,d=n.length;r<d;){var h=r+d>>1;i<n[h][0]?d=h:r=h+1}return r},pixelSnap:function(n,i){return i%2===0?Math.round(n):Math.floor(n)+.5}};function l(n){this.options=t.extend({},l.defaultOptions,n),this.disabled=!1,this.clear()}l.defaultOptions={resetBoundsInterval:3e3,resetBounds:!0},l.prototype.clear=function(){this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN},l.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1],this.minValue=this.data[0][1];for(var n=1;n<this.data.length;n++){var i=this.data[n][1];i>this.maxValue&&(this.maxValue=i),i<this.minValue&&(this.minValue=i)}}else this.maxValue=Number.NaN,this.minValue=Number.NaN},l.prototype.append=function(n,i,r){if(!(isNaN(n)||isNaN(i))){var d=this.data.length-1;if(d>=0)for(var h=d;;){var o=this.data[h];if(n>=o[0]){n===o[0]?r?(o[1]+=i,i=o[1]):o[1]=i:this.data.splice(h+1,0,[n,i]);break}if(h--,h<0){this.data.splice(0,0,[n,i]);break}}else this.data.push([n,i]);this.maxValue=isNaN(this.maxValue)?i:Math.max(this.maxValue,i),this.minValue=isNaN(this.minValue)?i:Math.min(this.minValue,i)}},l.prototype.dropOldData=function(n,i){for(var r=0;this.data.length-r>=i&&this.data[r+1][0]<n;)r++;r!==0&&this.data.splice(0,r)};function s(n){this.options=t.extend({},s.defaultChartOptions,n),this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0,this.lastRenderTimeMillis=0,this.lastChartTimestamp=0,this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this)}s.tooltipFormatter=function(n,i){var r=this.options.timestampFormatter||s.timeFormatter,d=document.createElement("div"),h;d.appendChild(document.createTextNode(r(new Date(n))));for(var o=0;o<i.length;++o){h=i[o].series.options.tooltipLabel||"",h!==""&&(h=h+" ");var c=document.createElement("span");c.style.color=i[o].series.options.strokeStyle,c.appendChild(document.createTextNode(h+this.options.yMaxFormatter(i[o].value,this.options.labels.precision))),d.appendChild(document.createElement("br")),d.appendChild(c)}return d.innerHTML},s.defaultChartOptions={millisPerPixel:20,enableDpiScaling:!0,yMinFormatter:function(n,i){return parseFloat(n).toFixed(i)},yMaxFormatter:function(n,i){return parseFloat(n).toFixed(i)},yIntermediateFormatter:function(n,i){return parseFloat(n).toFixed(i)},maxValueScale:1,minValueScale:1,interpolation:"bezier",scaleSmoothing:.125,maxDataSetLength:2,scrollBackwards:!1,displayDataFromPercentile:1,grid:{fillStyle:"#000000",strokeStyle:"#777777",lineWidth:2,millisPerLine:1e3,verticalSections:2,borderVisible:!0},labels:{fillStyle:"#ffffff",disabled:!1,fontSize:10,fontFamily:"monospace",precision:2,showIntermediateLabels:!1,intermediateLabelSameAxis:!0},title:{text:"",fillStyle:"#ffffff",fontSize:15,fontFamily:"monospace",verticalAlign:"middle"},horizontalLines:[],tooltip:!1,tooltipLine:{lineWidth:1,strokeStyle:"#BBBBBB"},tooltipFormatter:s.tooltipFormatter,nonRealtimeData:!1,responsive:!1,limitFPS:0},s.AnimateCompatibility=function(){var n=function(r,d){var h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(o){return window.setTimeout(function(){o(Date.now())},16)};return h.call(window,r,d)},i=function(r){var d=window.cancelAnimationFrame||function(h){clearTimeout(h)};return d.call(window,r)};return{requestAnimationFrame:n,cancelAnimationFrame:i}}(),s.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:"#ffffff"},s.prototype.addTimeSeries=function(n,i){this.seriesSet.push({timeSeries:n,options:t.extend({},s.defaultSeriesPresentationOptions,i)}),n.options.resetBounds&&n.options.resetBoundsInterval>0&&(n.resetBoundsTimerId=setInterval(function(){n.resetBounds()},n.options.resetBoundsInterval))},s.prototype.removeTimeSeries=function(n){for(var i=this.seriesSet.length,r=0;r<i;r++)if(this.seriesSet[r].timeSeries===n){this.seriesSet.splice(r,1);break}n.resetBoundsTimerId&&clearInterval(n.resetBoundsTimerId)},s.prototype.getTimeSeriesOptions=function(n){for(var i=this.seriesSet.length,r=0;r<i;r++)if(this.seriesSet[r].timeSeries===n)return this.seriesSet[r].options},s.prototype.bringToFront=function(n){for(var i=this.seriesSet.length,r=0;r<i;r++)if(this.seriesSet[r].timeSeries===n){var d=this.seriesSet.splice(r,1);this.seriesSet.push(d[0]);break}},s.prototype.streamTo=function(n,i){this.canvas=n,this.clientWidth=parseInt(this.canvas.getAttribute("width")),this.clientHeight=parseInt(this.canvas.getAttribute("height")),this.delay=i,this.start()},s.prototype.getTooltipEl=function(){return this.tooltipEl||(this.tooltipEl=document.createElement("div"),this.tooltipEl.className="smoothie-chart-tooltip",this.tooltipEl.style.pointerEvents="none",this.tooltipEl.style.position="absolute",this.tooltipEl.style.display="none",document.body.appendChild(this.tooltipEl)),this.tooltipEl},s.prototype.updateTooltip=function(){if(this.options.tooltip){var n=this.getTooltipEl();if(!this.mouseover||!this.options.tooltip){n.style.display="none";return}for(var i=this.lastChartTimestamp,r=this.options.scrollBackwards?i-this.mouseX*this.options.millisPerPixel:i-(this.clientWidth-this.mouseX)*this.options.millisPerPixel,d=[],h=0;h<this.seriesSet.length;h++){var o=this.seriesSet[h].timeSeries;if(!o.disabled){var c=t.binarySearch(o.data,r);c>0&&c<o.data.length&&d.push({series:this.seriesSet[h],index:c,value:o.data[c][1]})}}d.length?(n.innerHTML=this.options.tooltipFormatter.call(this,r,d),n.style.display="block"):n.style.display="none"}},s.prototype.mousemove=function(n){if(this.mouseover=!0,this.mouseX=n.offsetX,this.mouseY=n.offsetY,this.mousePageX=n.pageX,this.mousePageY=n.pageY,!!this.options.tooltip){var i=this.getTooltipEl();i.style.top=Math.round(this.mousePageY)+"px",i.style.left=Math.round(this.mousePageX)+"px",this.updateTooltip()}},s.prototype.mouseout=function(){this.mouseover=!1,this.mouseX=this.mouseY=-1,this.tooltipEl&&(this.tooltipEl.style.display="none")},s.prototype.resize=function(){var n=!this.options.enableDpiScaling||!window?1:window.devicePixelRatio,i,r;this.options.responsive?(i=this.canvas.offsetWidth,r=this.canvas.offsetHeight,i!==this.lastWidth&&(this.lastWidth=i,this.canvas.setAttribute("width",Math.floor(i*n).toString()),this.canvas.getContext("2d").scale(n,n)),r!==this.lastHeight&&(this.lastHeight=r,this.canvas.setAttribute("height",Math.floor(r*n).toString()),this.canvas.getContext("2d").scale(n,n)),this.clientWidth=i,this.clientHeight=r):(i=parseInt(this.canvas.getAttribute("width")),r=parseInt(this.canvas.getAttribute("height")),n!==1?(Math.floor(this.clientWidth*n)!==i&&(this.canvas.setAttribute("width",Math.floor(i*n).toString()),this.canvas.style.width=i+"px",this.clientWidth=i,this.canvas.getContext("2d").scale(n,n)),Math.floor(this.clientHeight*n)!==r&&(this.canvas.setAttribute("height",Math.floor(r*n).toString()),this.canvas.style.height=r+"px",this.clientHeight=r,this.canvas.getContext("2d").scale(n,n))):(this.clientWidth=i,this.clientHeight=r))},s.prototype.start=function(){if(!this.frame){this.canvas.addEventListener("mousemove",this.mousemove),this.canvas.addEventListener("mouseout",this.mouseout);var n=(function(){this.frame=s.AnimateCompatibility.requestAnimationFrame((function(){if(this.options.nonRealtimeData){var i=new Date(0),r=this.seriesSet.reduce((function(d,h){var o=h.timeSeries.data,c=Math.round(this.options.displayDataFromPercentile*o.length)-1;if(c=c>=0?c:0,c=c<=o.length-1?c:o.length-1,o&&o.length>0){var u=o[c][0];d=d>u?d:u}return d}).bind(this),i);this.render(this.canvas,r>i?r:null)}else this.render();n()}).bind(this))}).bind(this);n()}},s.prototype.stop=function(){this.frame&&(s.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame,this.canvas.removeEventListener("mousemove",this.mousemove),this.canvas.removeEventListener("mouseout",this.mouseout))},s.prototype.updateValueRange=function(){for(var n=this.options,i=Number.NaN,r=Number.NaN,d=0;d<this.seriesSet.length;d++){var h=this.seriesSet[d].timeSeries;h.disabled||(isNaN(h.maxValue)||(i=isNaN(i)?h.maxValue:Math.max(i,h.maxValue)),isNaN(h.minValue)||(r=isNaN(r)?h.minValue:Math.min(r,h.minValue)))}if(n.maxValue!=null?i=n.maxValue:i*=n.maxValueScale,n.minValue!=null?r=n.minValue:r-=Math.abs(r*n.minValueScale-r),this.options.yRangeFunction){var o=this.options.yRangeFunction({min:r,max:i});r=o.min,i=o.max}if(!isNaN(i)&&!isNaN(r)){var c=i-r,u=c-this.currentValueRange,_=r-this.currentVisMinValue;this.isAnimatingScale=Math.abs(u)>.1||Math.abs(_)>.1,this.currentValueRange+=n.scaleSmoothing*u,this.currentVisMinValue+=n.scaleSmoothing*_}this.valueRange={min:r,max:i}},s.prototype.render=function(n,i){var r=Date.now();if(!(this.options.limitFPS>0&&r-this.lastRenderTimeMillis<1e3/this.options.limitFPS)){if(i=(i||r)-(this.delay||0),i-=i%this.options.millisPerPixel,!this.isAnimatingScale){var d=this.lastChartTimestamp===i;if(d){var h=r-this.lastRenderTimeMillis>166.66666666666666;if(!h)return}}this.lastRenderTimeMillis=r,this.lastChartTimestamp=i,this.resize(),n=n||this.canvas;var o=n.getContext("2d"),c=this.options,u={top:0,left:0,width:this.clientWidth,height:this.clientHeight},_=i-u.width*c.millisPerPixel,W=(function(L,Z){var ie=L-this.currentVisMinValue,ue=this.currentValueRange===0?u.height:u.height*(1-ie/this.currentValueRange);return t.pixelSnap(ue,Z)}).bind(this),A=function(L,Z){var ie=c.scrollBackwards?(i-L)/c.millisPerPixel:u.width-(i-L)/c.millisPerPixel;return t.pixelSnap(ie,Z)};if(this.updateValueRange(),o.font=c.labels.fontSize+"px "+c.labels.fontFamily,o.save(),o.translate(u.left,u.top),o.beginPath(),o.rect(0,0,u.width,u.height),o.clip(),o.save(),o.fillStyle=c.grid.fillStyle,o.clearRect(0,0,u.width,u.height),o.fillRect(0,0,u.width,u.height),o.restore(),o.save(),o.lineWidth=c.grid.lineWidth,o.strokeStyle=c.grid.strokeStyle,c.grid.millisPerLine>0){o.beginPath();for(var P=i-i%c.grid.millisPerLine;P>=_;P-=c.grid.millisPerLine){var T=A(P,c.grid.lineWidth);o.moveTo(T,0),o.lineTo(T,u.height)}o.stroke(),o.closePath()}for(var B=1;B<c.grid.verticalSections;B++){var N=t.pixelSnap(B*u.height/c.grid.verticalSections,c.grid.lineWidth);o.beginPath(),o.moveTo(0,N),o.lineTo(u.width,N),o.stroke(),o.closePath()}if(c.grid.borderVisible&&(o.beginPath(),o.strokeRect(0,0,u.width,u.height),o.closePath()),o.restore(),c.horizontalLines&&c.horizontalLines.length)for(var le=0;le<c.horizontalLines.length;le++){var ce=c.horizontalLines[le],de=ce.lineWidth||1,k=W(ce.value,de);o.strokeStyle=ce.color||"#ffffff",o.lineWidth=de,o.beginPath(),o.moveTo(0,k),o.lineTo(u.width,k),o.stroke(),o.closePath()}for(var f=0;f<this.seriesSet.length;f++){var z=this.seriesSet[f].timeSeries,V=z.data;if(z.dropOldData(_,c.maxDataSetLength),!(V.length<=1||z.disabled)){o.save();var Q=this.seriesSet[f].options,fe=Q.strokeStyle&&Q.strokeStyle!=="none",te=fe?Q.lineWidth:0;o.beginPath();var I=A(V[0][0],te),he=W(V[0][1],te),me=I,H=he,ae;switch(o.moveTo(I,he),Q.interpolation||c.interpolation){case"linear":case"line":{ae=function(L,Z,ie,ue){o.lineTo(L,Z)};break}case"bezier":default:{ae=function(L,Z,ie,ue){o.bezierCurveTo(Math.round((ie+L)/2),ue,Math.round(ie+L)/2,Z,L,Z)};break}case"step":{ae=function(L,Z,ie,ue){o.lineTo(L,ue),o.lineTo(L,Z)};break}}for(var ke=1;ke<V.length;ke++){var ve=V[ke],ze=A(ve[0],te),Te=W(ve[1],te);ae(ze,Te,me,H),me=ze,H=Te}fe&&(o.lineWidth=Q.lineWidth,o.strokeStyle=Q.strokeStyle,o.stroke()),Q.fillStyle&&(o.lineTo(me,u.height+te+1),o.lineTo(I,u.height+te+1),o.fillStyle=Q.fillStyle,o.fill()),o.restore()}}c.tooltip&&this.mouseX>=0&&(o.lineWidth=c.tooltipLine.lineWidth,o.strokeStyle=c.tooltipLine.strokeStyle,o.beginPath(),o.moveTo(this.mouseX,0),o.lineTo(this.mouseX,u.height),o.closePath(),o.stroke()),this.updateTooltip();var oe=c.labels;if(!oe.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var Oe=c.yMaxFormatter(this.valueRange.max,oe.precision),ge=c.yMinFormatter(this.valueRange.min,oe.precision),Ne=c.scrollBackwards?0:u.width-o.measureText(Oe).width-2,Ae=c.scrollBackwards?0:u.width-o.measureText(ge).width-2;o.fillStyle=oe.fillStyle,o.fillText(Oe,Ne,oe.fontSize),o.fillText(ge,Ae,u.height-2)}if(oe.showIntermediateLabels&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)&&c.grid.verticalSections>0)for(var Be=(this.valueRange.max-this.valueRange.min)/c.grid.verticalSections,Ce=u.height/c.grid.verticalSections,B=1;B<c.grid.verticalSections;B++){var N=u.height-Math.round(B*Ce),y=c.yIntermediateFormatter(this.valueRange.min+B*Be,oe.precision),g=oe.intermediateLabelSameAxis?c.scrollBackwards?0:u.width-o.measureText(y).width-2:c.scrollBackwards?u.width-o.measureText(y).width-2:0;o.fillText(y,g,N-c.grid.lineWidth)}if(c.timestampFormatter&&c.grid.millisPerLine>0)for(var m=c.scrollBackwards?o.measureText(ge).width:u.width-o.measureText(ge).width+4,P=i-i%c.grid.millisPerLine;P>=_;P-=c.grid.millisPerLine){var T=A(P,0);if(!c.scrollBackwards&&T<m||c.scrollBackwards&&T>m){var K=new Date(P),O=c.timestampFormatter(K),C=o.measureText(O).width;m=c.scrollBackwards?T+C+2:T-C-2,o.fillStyle=c.labels.fillStyle,c.scrollBackwards?o.fillText(O,T,u.height-2):o.fillText(O,T-C,u.height-2)}}if(c.title.text!==""){o.font=c.title.fontSize+"px "+c.title.fontFamily;var xe=c.scrollBackwards?u.width-o.measureText(c.title.text).width-2:2;if(c.title.verticalAlign=="bottom"){o.textBaseline="bottom";var D=u.height}else if(c.title.verticalAlign=="middle"){o.textBaseline="middle";var D=u.height/2}else{o.textBaseline="top";var D=0}o.fillStyle=c.title.fillStyle,o.fillText(c.title.text,xe,D)}o.restore()}},s.timeFormatter=function(n){function i(r){return(r<10?"0":"")+r}return i(n.getHours())+":"+i(n.getMinutes())+":"+i(n.getSeconds())},a.TimeSeries=l,a.SmoothieChart=s})(e)})(X);function ca(e){return _e.get("/v1/device/"+e)}function ua(e){return _e.get("/v1/user?page="+e.page+"&size="+e.size)}function da(e){return _e.get("/v1/device/"+e.domain+"/alloc?page="+e.page+"&size="+e.size)}function ha(e,a){return _e.post("/v1/device/"+e+"/alloc?id="+a)}function ma(e,a){return _e.delete("/v1/device/"+e+"/alloc?id="+a)}function fa(e){return _e.get("/v1/device/"+e+"/status?limit=2280")}function j(e){const a=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&a==="[object Date]"?new e.constructor(+e):typeof e=="number"||a==="[object Number]"||typeof e=="string"||a==="[object String]"?new Date(e):new Date(NaN)}const De=43200,lt=1440;let xa={};function pt(){return xa}function ct(e,a){var r,d,h,o;const t=pt(),l=(a==null?void 0:a.weekStartsOn)??((d=(r=a==null?void 0:a.locale)==null?void 0:r.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((o=(h=t.locale)==null?void 0:h.options)==null?void 0:o.weekStartsOn)??0,s=j(e),n=s.getDay(),i=(n<l?7:0)+n-l;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function ut(e){const a=j(e),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),+e-+t}function Fe(e,a){const t=j(e),l=j(a),s=t.getTime()-l.getTime();return s<0?-1:s>0?1:s}function pa(e,a){const t=j(e),l=j(a),s=t.getFullYear()-l.getFullYear(),n=t.getMonth()-l.getMonth();return s*12+n}function va(e){return a=>{const l=(e?Math[e]:Math.trunc)(a);return l===0?0:l}}function ga(e,a){return+j(e)-+j(a)}function ya(e){const a=j(e);return a.setHours(23,59,59,999),a}function ba(e){const a=j(e),t=a.getMonth();return a.setFullYear(a.getFullYear(),t+1,0),a.setHours(23,59,59,999),a}function wa(e){const a=j(e);return+ya(a)==+ba(a)}function Sa(e,a){const t=j(e),l=j(a),s=Fe(t,l),n=Math.abs(pa(t,l));let i;if(n<1)i=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-s*n);let r=Fe(t,l)===-s;wa(j(e))&&n===1&&Fe(e,l)===1&&(r=!1),i=s*(n-Number(r))}return i===0?0:i}function _a(e,a,t){const l=ga(e,a)/1e3;return va(t==null?void 0:t.roundingMethod)(l)}const ka={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Pa=(e,a,t)=>{let l;const s=ka[e];return typeof s=="string"?l=s:a===1?l=s.one:l=s.other.replace("{{count}}",a.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+l:l+" ago":l};function we(e){return(a={})=>{const t=a.width?String(a.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const Ma={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},za={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ta={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Oa={date:we({formats:Ma,defaultWidth:"full"}),time:we({formats:za,defaultWidth:"full"}),dateTime:we({formats:Ta,defaultWidth:"full"})},Ca={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Da=(e,a,t,l)=>Ca[e];function re(e){return(a,t)=>{const l=t!=null&&t.context?String(t.context):"standalone";let s;if(l==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,r=t!=null&&t.width?String(t.width):i;s=e.formattingValues[r]||e.formattingValues[i]}else{const i=e.defaultWidth,r=t!=null&&t.width?String(t.width):e.defaultWidth;s=e.values[r]||e.values[i]}const n=e.argumentCallback?e.argumentCallback(a):a;return s[n]}}const La={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Fa={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wa={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Na={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Aa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ba={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Va=(e,a)=>{const t=Number(e),l=t%100;if(l>20||l<10)switch(l%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Ia={ordinalNumber:Va,era:re({values:La,defaultWidth:"wide"}),quarter:re({values:Fa,defaultWidth:"wide",argumentCallback:e=>e-1}),month:re({values:Wa,defaultWidth:"wide"}),day:re({values:Na,defaultWidth:"wide"}),dayPeriod:re({values:Aa,defaultWidth:"wide",formattingValues:Ba,defaultFormattingWidth:"wide"})};function se(e){return(a,t={})=>{const l=t.width,s=l&&e.matchPatterns[l]||e.matchPatterns[e.defaultMatchWidth],n=a.match(s);if(!n)return null;const i=n[0],r=l&&e.parsePatterns[l]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(r)?Ea(r,c=>c.test(i)):Ra(r,c=>c.test(i));let h;h=e.valueCallback?e.valueCallback(d):d,h=t.valueCallback?t.valueCallback(h):h;const o=a.slice(i.length);return{value:h,rest:o}}}function Ra(e,a){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&a(e[t]))return t}function Ea(e,a){for(let t=0;t<e.length;t++)if(a(e[t]))return t}function vt(e){return(a,t={})=>{const l=a.match(e.matchPattern);if(!l)return null;const s=l[0],n=a.match(e.parsePattern);if(!n)return null;let i=e.valueCallback?e.valueCallback(n[0]):n[0];i=t.valueCallback?t.valueCallback(i):i;const r=a.slice(s.length);return{value:i,rest:r}}}const $a=/^(\d+)(th|st|nd|rd)?/i,ja=/\d+/i,Ua={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ha={any:[/^b/i,/^(a|c)/i]},Xa={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ya={any:[/1/i,/2/i,/3/i,/4/i]},Ga={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},qa={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ja={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qa={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ka={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Za={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ei={ordinalNumber:vt({matchPattern:$a,parsePattern:ja,valueCallback:e=>parseInt(e,10)}),era:se({matchPatterns:Ua,defaultMatchWidth:"wide",parsePatterns:Ha,defaultParseWidth:"any"}),quarter:se({matchPatterns:Xa,defaultMatchWidth:"wide",parsePatterns:Ya,defaultParseWidth:"any",valueCallback:e=>e+1}),month:se({matchPatterns:Ga,defaultMatchWidth:"wide",parsePatterns:qa,defaultParseWidth:"any"}),day:se({matchPatterns:Ja,defaultMatchWidth:"wide",parsePatterns:Qa,defaultParseWidth:"any"}),dayPeriod:se({matchPatterns:Ka,defaultMatchWidth:"any",parsePatterns:Za,defaultParseWidth:"any"})},ti={code:"en-US",formatDistance:Pa,formatLong:Oa,formatRelative:Da,localize:Ia,match:ei,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dt(e,a,t){const l=pt(),s=(t==null?void 0:t.locale)??l.locale??ti,n=2520,i=Fe(e,a);if(isNaN(i))throw new RangeError("Invalid time value");const r=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:i});let d,h;i>0?(d=j(a),h=j(e)):(d=j(e),h=j(a));const o=_a(h,d),c=(ut(h)-ut(d))/1e3,u=Math.round((o-c)/60);let _;if(u<2)return t!=null&&t.includeSeconds?o<5?s.formatDistance("lessThanXSeconds",5,r):o<10?s.formatDistance("lessThanXSeconds",10,r):o<20?s.formatDistance("lessThanXSeconds",20,r):o<40?s.formatDistance("halfAMinute",0,r):o<60?s.formatDistance("lessThanXMinutes",1,r):s.formatDistance("xMinutes",1,r):u===0?s.formatDistance("lessThanXMinutes",1,r):s.formatDistance("xMinutes",u,r);if(u<45)return s.formatDistance("xMinutes",u,r);if(u<90)return s.formatDistance("aboutXHours",1,r);if(u<lt){const W=Math.round(u/60);return s.formatDistance("aboutXHours",W,r)}else{if(u<n)return s.formatDistance("xDays",1,r);if(u<De){const W=Math.round(u/lt);return s.formatDistance("xDays",W,r)}else if(u<De*2)return _=Math.round(u/De),s.formatDistance("aboutXMonths",_,r)}if(_=Sa(h,d),_<12){const W=Math.round(u/De);return s.formatDistance("xMonths",W,r)}else{const W=_%12,A=Math.trunc(_/12);return W<3?s.formatDistance("aboutXYears",A,r):W<9?s.formatDistance("overXYears",A,r):s.formatDistance("almostXYears",A+1,r)}}function ai(e,a,t){const l=ct(e,t),s=ct(a,t);return+l==+s}const ii={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}},ni=(e,a,t)=>{let l;const s=ii[e];return typeof s=="string"?l=s:a===1?l=s.one:l=s.other.replace("{{count}}",String(a)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?l+"内":l+"前":l},oi={full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},ri={full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},si={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},li={date:we({formats:oi,defaultWidth:"full"}),time:we({formats:ri,defaultWidth:"full"}),dateTime:we({formats:si,defaultWidth:"full"})};function ht(e,a,t){const l="eeee p";return ai(e,a,t)?l:e.getTime()>a.getTime()?"'下个'"+l:"'上个'"+l}const ci={lastWeek:ht,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:ht,other:"PP p"},ui=(e,a,t,l)=>{const s=ci[e];return typeof s=="function"?s(a,t,l):s},di={narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},hi={narrow:["1","2","3","4"],abbreviated:["第一季","第二季","第三季","第四季"],wide:["第一季度","第二季度","第三季度","第四季度"]},mi={narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},fi={narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},xi={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},pi={narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},vi=(e,a)=>{const t=Number(e);switch(a==null?void 0:a.unit){case"date":return t.toString()+"日";case"hour":return t.toString()+"时";case"minute":return t.toString()+"分";case"second":return t.toString()+"秒";default:return"第 "+t.toString()}},gi={ordinalNumber:vi,era:re({values:di,defaultWidth:"wide"}),quarter:re({values:hi,defaultWidth:"wide",argumentCallback:e=>e-1}),month:re({values:mi,defaultWidth:"wide"}),day:re({values:fi,defaultWidth:"wide"}),dayPeriod:re({values:xi,defaultWidth:"wide",formattingValues:pi,defaultFormattingWidth:"wide"})},yi=/^(第\s*)?\d+(日|时|分|秒)?/i,bi=/\d+/i,wi={narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},Si={any:[/^(前)/i,/^(公元)/i]},_i={narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},ki={any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},Pi={narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},Mi={narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},zi={narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},Ti={any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},Oi={any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},Ci={any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},Di={ordinalNumber:vt({matchPattern:yi,parsePattern:bi,valueCallback:e=>parseInt(e,10)}),era:se({matchPatterns:wi,defaultMatchWidth:"wide",parsePatterns:Si,defaultParseWidth:"any"}),quarter:se({matchPatterns:_i,defaultMatchWidth:"wide",parsePatterns:ki,defaultParseWidth:"any",valueCallback:e=>e+1}),month:se({matchPatterns:Pi,defaultMatchWidth:"wide",parsePatterns:Mi,defaultParseWidth:"any"}),day:se({matchPatterns:zi,defaultMatchWidth:"wide",parsePatterns:Ti,defaultParseWidth:"any"}),dayPeriod:se({matchPatterns:Oi,defaultMatchWidth:"any",parsePatterns:Ci,defaultParseWidth:"any"})},mt={code:"zh-CN",formatDistance:ni,formatLong:li,formatRelative:ui,localize:gi,match:Di,options:{weekStartsOn:1,firstWeekContainsDate:4}},qe=e=>(Ct("data-v-bd9ec27d"),e=e(),Dt(),e),Li={class:"detail-content"},Fi={class:"device-info"},Wi={class:"info"},Ni={class:"title"},Ai={class:"detail-buttons"},Bi={class:"detail-buttons-item",target:"_blank"},Vi={class:"detail-buttons-item",target:"_blank"},Ii=["href"],Ri={class:"name"},Ei={class:"value"},$i={class:"title"},ji={class:"owner-list"},Ui={class:"owner-info"},Hi={class:"avatar"},Xi={class:"name-outer"},Yi={class:"name"},Gi={class:"contact"},qi={key:0,class:"remove-btn"},Ji={class:"device-charts"},Qi={class:"chart-container"},Ki=qe(()=>x("div",{class:"chart-title"},"实时状态",-1)),Zi={class:"chart status-chart"},en={class:"chart-top"},tn=qe(()=>x("canvas",{id:"memMonitor",style:{width:"100%",height:"15vh"}},null,-1)),an=qe(()=>x("div",{class:"chart-bottom"},[x("canvas",{id:"netMonitor",style:{width:"100%",height:"15vh"}})],-1)),nn={class:"chart-container"},on={class:"chart-container"},rn={class:"chart-container"},sn={class:"radio-user-container"},ln={class:"radio-content"},cn={class:"user-left"},un={class:"user-name"},dn={class:"user-contact"},hn=Me({__name:"detail",props:{activeKey:{type:String,default:""}},setup(e){var Ce;const a=e,t=(Ce=je.getUser())==null?void 0:Ce.admin,l=p(null),s=p(null),n=p(null),i=p(null),r=p([]),d=p([]),h=p([]),o=p(""),c=p(!1),u=p(null),_=p(null),W=p(null),A=p(null),P=p(null),T=p();let B=null;const N=p([]),le=p([]),ce=p([]),de=p([]),k=p([]),f=p([]),z=p([]),V=p([]),Q=p([]),fe=p([]),te=p([]),I=p([]),he=p([]),me=async()=>{var g;const y=await ca(U().deviceDomain);if(((g=y==null?void 0:y.data)==null?void 0:g.status)===0){const m=y.data.data;s.value=m.state===1,n.value=m.batt_charging,i.value=m.api_available,l.value=m.cert,r.value=[{name:"设备域名",value:m.domain},{name:"设备状态",value:m.state==1?"在线":m.state==0?"离线":"未知"},{name:"公网地址",value:m.public_ip},{name:"所在地区",value:m.ip_city},{name:"设备品牌",value:m.brand},{name:"设备型号",value:m.model},{name:"系统版本",value:Y.sdkToVersion(m.sdk)},{name:"设备架构",value:m.abi},{name:"内存大小",value:Y.bytesTokmgbString(m.mem_total," ")},{name:"磁盘大小",value:Y.bytesTokmgbString(m.disk_total," ")},{name:"运行时间",value:m.state==1?dt(new Date,new Date(m.boot_time*1e3),{locale:mt}):"未知"},{name:"最后心跳",value:dt(new Date,new Date(m.heartbeat_time*1e3),{locale:mt})}]}else r.value=[]},H=function(){return"d/"+U().deviceDomain+"/"},ae=function(){if(!l.value){J.error("无法下载接口证书");return}let y=new Blob([l.value],{type:l.value.type}),g=document.createElement("a"),m=window.URL.createObjectURL(y);g.href=m,g.download=U().deviceDomain+".pem",document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(m)},ke=async()=>{var m;if(!t)return;const y={page:1,size:1e3},g=await ua(y);((m=g==null?void 0:g.data)==null?void 0:m.status)===0?h.value=g.data.data:h.value=[]},ve=async()=>{var m;const y={domain:U().deviceDomain,page:1,size:1e3},g=await da(y);((m=g==null?void 0:g.data)==null?void 0:m.status)===0?d.value=g.data.data:d.value=[]},ze=()=>{o.value="",c.value=!0},Te=async()=>{var g,m;if(!o.value)return J.warning("请选择要添加的用户");const y=await ha(U().deviceDomain,o.value);((g=y==null?void 0:y.data)==null?void 0:g.status)===0?(c.value=!1,J.success("添加成功"),ve()):J.error("添加失败："+((m=y==null?void 0:y.data)==null?void 0:m.message))},oe=async y=>{var m,K;const g=await ma(U().deviceDomain,y.id);((m=g==null?void 0:g.data)==null?void 0:m.status)===0?(J.success("用户已移除"),ve()):J.error("用户移除失败："+((K=g==null?void 0:g.data)==null?void 0:K.message))},Oe=async()=>{var g,m,K;const y=await fa(U().deviceDomain);((g=y==null?void 0:y.data)==null?void 0:g.status)===0?((m=y==null?void 0:y.data)!=null&&m.data&&((K=y==null?void 0:y.data)==null||K.data.reverse().forEach(O=>{const C=Y.timestampToDate(O.timestamp);N.value.push(C),le.value.push([C,O.cpu_percent]),ce.value.push([C,O.cpu_times_user]),de.value.push([C,O.cpu_times_system]),k.value.push([C,Y.bytesToMB(O.mem_free)]),z.value.push([C,Y.bytesToMB(O.mem_buffers)]),f.value.push([C,Y.bytesToMB(O.mem_cached)]),V.value.push([C,Y.bytesToMB(O.mem_available)]),Q.value.push([C,O.fd_count]),fe.value.push([C,O.tcpcon_count]),te.value.push([C,O.udpcon_count]),I.value.push([C,O.thread_count]),he.value.push([C,O.crash_count])})),Ae(),ge(),Ne()):console.log(status)},ge=()=>{Re(_.value).setOption({animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,aria:{enabled:!1},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],series:[{type:"line",name:"free (MB)",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:k.value,label:{show:!1,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:.25},zlevel:0,z:0,rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}},{type:"line",name:"buffer (MB)",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:z.value,label:{show:!1,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:.25},zlevel:0,z:0,rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}},{type:"line",name:"cached (MB)",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:f.value,label:{show:!1,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:.25},zlevel:0,z:0,rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}},{type:"line",name:"available (MB)",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:V.value,label:{show:!1,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:.25},zlevel:0,z:0,rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}}],legend:[{data:["free (MB)","buffer (MB)","cached (MB)","available (MB)"],selected:{},show:!0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,pageButtonItemGap:5,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,animationDurationUpdate:800,selector:!1,selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,left:"right"}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,enterable:!1,confine:!1,appendToBody:!1,transitionDuration:.4,textStyle:{fontSize:14},borderWidth:0,padding:5,order:"seriesAsc"},xAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!0,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}},data:N.value}],yAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!0,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}}}],title:[{show:!0,text:"内存",target:"blank",subtarget:"blank",left:"left",padding:3,itemGap:10,textAlign:"auto",textVerticalAlign:"auto",triggerEvent:!1,textStyle:{fontSize:18,color:"#707B7C"}}],toolbox:{show:!0,orient:"horizontal",itemSize:15,itemGap:10,left:"80%"},dataZoom:[{show:!0,type:"inside",start:0,end:100}],grid:{left:50,right:10,top:50,bottom:20}})},Ne=()=>{Re(W.value).setOption({animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,aria:{enabled:!1},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],series:[{type:"line",name:"File",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:Q.value,label:{show:!0,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"Socket (TCP)",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:fe.value,label:{show:!0,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"Socket (UDP)",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:te.value,label:{show:!0,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"Thread",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:I.value,label:{show:!0,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0},{type:"line",name:"Crash",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:he.value,label:{show:!0,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:0},zlevel:0,z:0}],legend:[{data:["File","Socket (TCP)","Socket (UDP)","Thread","Crash"],selected:{File:!1,Thread:!1,Crash:!1},show:!0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,pageButtonItemGap:5,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,animationDurationUpdate:800,selector:!1,selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,left:"right"}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,enterable:!1,confine:!1,appendToBody:!1,transitionDuration:.4,textStyle:{fontSize:14},borderWidth:0,padding:5,order:"seriesAsc"},xAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!0,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}},data:N.value}],yAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!0,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}}}],title:[{show:!0,text:"资源",target:"blank",subtarget:"blank",left:"left",padding:3,itemGap:10,textAlign:"auto",textVerticalAlign:"auto",triggerEvent:!1,textStyle:{fontSize:18,color:"#707B7C"}}],toolbox:{show:!0,orient:"horizontal",itemSize:15,itemGap:10,left:"80%"},dataZoom:[{show:!0,type:"inside",start:0,end:100}],grid:{left:50,right:10,top:50,bottom:20}})},Ae=()=>{Re(A.value).setOption({animation:!0,animationThreshold:2e3,animationDuration:1e3,animationEasing:"cubicOut",animationDelay:0,animationDurationUpdate:300,animationEasingUpdate:"cubicOut",animationDelayUpdate:0,aria:{enabled:!1},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],series:[{type:"line",name:"CPU",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:le.value,label:{show:!1,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:.25},markLine:{silent:!1,precision:2,label:{show:!0,margin:8},data:[{name:"均线",type:"average"}]},zlevel:0,z:0,rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}},{type:"line",name:"User",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:ce.value,label:{show:!1,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:.25},markLine:{silent:!1,precision:2,label:{show:!0,margin:8},lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid",color:"#0000FF"}},zlevel:0,z:0,rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}},{type:"line",name:"System",connectNulls:!1,xAxisIndex:0,symbolSize:4,showSymbol:!0,smooth:!1,clip:!0,step:!1,data:de.value,label:{show:!1,margin:8},logBase:10,seriesLayoutBy:"column",lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"},areaStyle:{opacity:.25},markLine:{silent:!1,precision:2,label:{show:!0,margin:8},lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid",color:"#FF0000"}},zlevel:0,z:0,rippleEffect:{show:!0,brushType:"stroke",scale:2.5,period:4}}],legend:[{data:["CPU","User","System"],selected:{},show:!0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,pageButtonItemGap:5,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,animationDurationUpdate:800,selector:!1,selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,left:"right"}],tooltip:{show:!0,trigger:"item",triggerOn:"mousemove|click",axisPointer:{type:"line"},showContent:!0,alwaysShowContent:!1,showDelay:0,hideDelay:100,enterable:!1,confine:!1,appendToBody:!1,transitionDuration:.4,textStyle:{fontSize:14},borderWidth:0,padding:5,order:"seriesAsc"},xAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!0,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}},data:N.value}],yAxis:[{show:!0,scale:!1,nameLocation:"end",nameGap:15,gridIndex:0,inverse:!1,offset:0,splitNumber:5,minInterval:0,splitLine:{show:!0,lineStyle:{show:!0,width:1,opacity:1,curveness:0,type:"solid"}}}],title:[{show:!0,text:"CPU",target:"blank",subtarget:"blank",left:"left",padding:3,itemGap:10,textAlign:"auto",textVerticalAlign:"auto",triggerEvent:!1,textStyle:{fontSize:18,color:"#707B7C"}}],toolbox:{show:!0,orient:"horizontal",itemSize:15,itemGap:10,left:"80%"},dataZoom:[{show:!0,type:"inside",start:0,end:100}],grid:{left:50,right:10,top:50,bottom:20}})},Be=()=>{const y=U().deviceDomain;window.location.protocol.replace("http","ws");const g=location.protocol.replace("http","ws")+"//"+location.host+"/d/"+y+"/ws/command";u.value=new WebSocket(g);var m=0,K=0,O=0,C=0,xe=0,D=0;P.value=new X.SmoothieChart({responsive:!0,yMinFormatter:function(ne,pe){return""},yMaxFormatter:function(ne,pe){return m+"% MEM"},millisPerPixel:100,grid:{lineWidth:1,millisPerLine:500,verticalSections:1,fillStyle:"white",strokeStyle:"#f5f5f5"},tooltipLine:{lineWidth:.5,strokeStyle:"#bbbbbb"},labels:{fillStyle:"black",fontFamily:"Courier New",fontSize:10},maxValue:100,minValue:0}),P.value.streamTo(document.getElementById("memMonitor"));var L=new X.TimeSeries,Z=new X.TimeSeries,ie=new X.TimeSeries,ue=new X.TimeSeries;P.value.addTimeSeries(L,{lineWidth:1,strokeStyle:"#3498db",fillStyle:"rgba(52, 152, 219, 0.1)",interpolation:"bezier"}),P.value.addTimeSeries(Z,{lineWidth:.5,strokeStyle:"#f1c40f",fillStyle:"rgba(241, 196, 15, 0.01)",interpolation:"bezier"}),P.value.addTimeSeries(ie,{lineWidth:.5,strokeStyle:"#3a4899",fillStyle:"rgba(58, 72, 153, 0.01)",interpolation:"bezier"}),P.value.addTimeSeries(ue,{lineWidth:.5,strokeStyle:"#e74c3c",fillStyle:"rgba(231, 76, 60, 0.01)",interpolation:"bezier"});var Pe=new X.SmoothieChart({responsive:!0,yMinFormatter:function(ne,pe){return""},yMaxFormatter:function(ne,pe){return K+"% CPU"},millisPerPixel:100,grid:{lineWidth:1,millisPerLine:500,verticalSections:1,fillStyle:"white",strokeStyle:"#f5f5f5"},tooltipLine:{lineWidth:.5,strokeStyle:"#bbbbbb"},labels:{fillStyle:"black",fontFamily:"Courier New",fontSize:10},maxValue:100,minValue:0});Pe.streamTo(document.getElementById("cpuMonitor"));var Je=new X.TimeSeries,gt=new X.TimeSeries,Qe=new X.TimeSeries,Ke=new X.TimeSeries;Pe.addTimeSeries(Je,{lineWidth:1.2,strokeStyle:"#00ff00",fillStyle:"rgba(0, 255, 0, 0.1)",interpolation:"bezier"}),Pe.addTimeSeries(gt,{lineWidth:.5,strokeStyle:"#979a9a",fillStyle:"rgba(151, 154, 154, 0.01)",interpolation:"bezier"}),Pe.addTimeSeries(Qe,{lineWidth:.5,strokeStyle:"#f39c12",fillStyle:"rgba(243, 156, 18, 0.01)",interpolation:"bezier"}),Pe.addTimeSeries(Ke,{lineWidth:.5,strokeStyle:"#2e86c1",fillStyle:"rgba(46, 134, 193, 0.01)",interpolation:"bezier"});var Ve=new X.SmoothieChart({responsive:!0,yMinFormatter:function(ne,pe){return Y.bytesTokmgbString(O)+"/s ⇣"},yMaxFormatter:function(ne,pe){return Y.bytesTokmgbString(C)+"/s ⇡"},millisPerPixel:100,grid:{lineWidth:1,millisPerLine:500,verticalSections:2,fillStyle:"white",strokeStyle:"#f5f5f5"},tooltipLine:{lineWidth:.5,strokeStyle:"#bbbbbb"},labels:{fillStyle:"black",fontFamily:"Courier New",fontSize:10},minValue:0});Ve.streamTo(document.getElementById("netMonitor"));var Ze=new X.TimeSeries,et=new X.TimeSeries;Ve.addTimeSeries(Ze,{lineWidth:1.2,strokeStyle:"#70bf56",fillStyle:"rgba(112, 191, 86, 0.01)",interpolation:"bezier"}),Ve.addTimeSeries(et,{lineWidth:.8,strokeStyle:"#cb4d1c",fillStyle:"rgba(203, 77, 28, 0.1)",interpolation:"bezier"}),u.value.onopen=function(ne){console.log("Connection open ..."),B=setInterval(()=>{u.value.readyState===WebSocket.OPEN&&u.value.send("status")},1e3)},u.value.onmessage=function(ne){if(ne&&ne.data){const{data:pe,timestamp:yt}=JSON.parse(ne.data),R={time:yt,...pe};m=R.mem_percent,L.append(R.time,m),Z.append(R.time,R.mem_buffers),ie.append(R.time,R.mem_cached),ue.append(R.time,R.mem_shared),K=R.cpu_percent,Je.append(R.time,K),Qe.append(R.time,R.cpu_times_user),Ke.append(R.time,R.cpu_times_system),C=xe?R.net_io_bytes_sent-xe:0,O=D?R.net_io_bytes_recv-D:0,D=R.net_io_bytes_recv,xe=R.net_io_bytes_sent,et.append(R.time,O),Ze.append(R.time,C)}},u.value.onclose=function(ne){console.log("Connection closed."),clearInterval(B)},a.activeKey==="1"&&u.value&&u.value.close()};return ft(()=>{me(),ve(),ke(),Oe(),Be()}),Tt(()=>{u.value&&u.value.close(),T.value&&(T.value.width=T.value.width),P.value=""}),(y,g)=>{const m=F("a-tooltip"),K=F("a-popconfirm"),O=F("a-radio"),C=F("a-radio-group"),xe=F("a-modal");return b(),M("div",Li,[x("div",Fi,[x("div",Wi,[x("div",Ni,[$("设备信息 "),x("div",Ai,[n.value?(b(),ee(m,{key:0,placement:"right"},{title:w(()=>[$("正在充电")]),default:w(()=>[x("a",Bi,[v(S(Ye),{style:{fontSize:"16px",color:"rgb(241 196 15)"}})])]),_:1})):E("",!0),i.value?(b(),ee(m,{key:1,placement:"right"},{title:w(()=>[$("接口可用")]),default:w(()=>[x("a",Vi,[v(S(He),{style:{fontSize:"16px",color:"rgb(40 180 99)"}})])]),_:1})):E("",!0),v(m,{placement:"right"},{title:w(()=>[$("下载接口证书")]),default:w(()=>[x("a",{onClick:ae,class:"detail-buttons-item",target:"_blank"},[v(S(Ge),{style:{fontSize:"16px",color:"rgb(52 152 219)"}})])]),_:1}),s.value?(b(),ee(m,{key:2,placement:"right"},{title:w(()=>[$("转到远程桌面")]),default:w(()=>[x("a",{href:H(),class:"detail-buttons-item",target:"_blank"},[v(S(Xe),{style:{fontSize:"16px",color:"rgb(107 114 128)"}})],8,Ii)]),_:1})):E("",!0)])]),(b(!0),M(G,null,Le(r.value,(D,L)=>(b(),M("div",{key:L,class:"info-item"},[x("div",Ri,q(D.name),1),x("div",Ei,q(D.value),1)]))),128))]),x("div",$i,[$("所属用户 "),S(t)?(b(),M("div",{key:0,class:"add-btn",onClick:ze},[v(S(Ot),{style:{fontSize:"16px",color:"rgb(107 114 128)"}})])):E("",!0)]),x("div",ji,[(b(!0),M(G,null,Le(d.value,(D,L)=>(b(),M("div",{key:L,class:"owner-item"},[x("div",Ui,[x("div",Hi,[v(S(We),{style:{fontSize:"22px",color:"rgb(107 114 128)"}})]),x("div",Xi,[x("div",Yi,q(D.name),1),x("div",Gi,q(D.contact),1)])]),S(t)?(b(),M("div",qi,[v(K,{title:"确认要移除该用户吗？","ok-text":"确定","cancel-text":"取消",onConfirm:()=>oe(D)},{default:w(()=>[v(S(Lt),{style:{fontSize:"22px",color:"rgb(239 68 68)"}})]),_:2},1032,["onConfirm"])])):E("",!0)]))),128))])]),x("div",Ji,[x("div",Qi,[Ki,x("div",Zi,[x("div",en,[x("canvas",{id:"cpuMonitor",style:{width:"100%",height:"15vh"},ref_key:"cpuMonitorRef",ref:T},null,512),tn]),an])]),x("div",nn,[x("div",{ref_key:"cpuChart",ref:A,class:"chart"},null,512)]),x("div",on,[x("div",{ref_key:"resourceChart",ref:W,class:"chart"},null,512)]),x("div",rn,[x("div",{ref_key:"memoryChart",ref:_,class:"chart"},null,512)])]),S(t)?(b(),ee(xe,{key:0,open:c.value,"onUpdate:open":g[1]||(g[1]=D=>c.value=D),title:"添加用户","ok-text":"确认","cancel-text":"取消",onOk:Te,style:{top:"50px"}},{default:w(()=>[x("div",sn,[v(C,{value:o.value,"onUpdate:value":g[0]||(g[0]=D=>o.value=D),class:"radio-user"},{default:w(()=>[(b(!0),M(G,null,Le(h.value,(D,L)=>(b(),ee(O,{key:L,value:D.id,class:"radio-item"},{default:w(()=>[x("span",ln,[x("span",cn,[v(S(We),{class:"user-icon"}),x("span",un,q(D.name),1)]),x("span",dn,q(D.contact),1)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])]),_:1},8,["open"])):E("",!0)])}}}),mn=$e(hn,[["__scopeId","data-v-bd9ec27d"]]),fn=Me({__name:"modal",props:{open:{type:Boolean,default:!1}},emits:["RefreshList"],setup(e,{emit:a}){const t=e,l=p(!1);Ee(()=>t.open,c=>{l.value=c});const s=a,n=()=>{U().changeCheckedList(r.checkedList),s("RefreshList",{isShow:!1})},i=p(["state","token_id","model","brand","abi","sdk","comment"]),r=xt({indeterminate:!0,checkAll:!1,checkedList:U().defaultCheckedList}),d=c=>{c.length===0&&(J.error("至少需要保留一个选项！"),r.checkedList=[...i.value])};Ee(()=>r.checkedList,c=>{r.indeterminate=!!c.length&&c.length<be.length,r.checkAll=c.length===be.length});const h=c=>{be.length!==0&&Object.assign(r,{checkedList:c.target.checked?be.map(u=>u.value):i.value,indeterminate:!1})},o=()=>{s("RefreshList",{type:"cancel",isShow:!1})};return(c,u)=>{const _=F("a-checkbox"),W=F("a-col"),A=F("a-row"),P=F("a-checkbox-group"),T=F("a-divider"),B=F("a-modal");return b(),ee(B,{open:l.value,"onUpdate:open":u[2]||(u[2]=N=>l.value=N),title:"表头选项","ok-text":"确定","cancel-text":"取消",onOk:n,onCancel:o},{default:w(()=>[v(P,{value:r.checkedList,"onUpdate:value":u[0]||(u[0]=N=>r.checkedList=N),onChange:d},{default:w(()=>[v(A,null,{default:w(()=>[(b(!0),M(G,null,Le(S(be),N=>(b(),ee(W,{span:8,key:N.value},{default:w(()=>[v(_,{value:N.value},{default:w(()=>[$(q(N.label),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"]),v(T),v(_,{checked:r.checkAll,"onUpdate:checked":u[1]||(u[1]=N=>r.checkAll=N),indeterminate:r.indeterminate,onChange:h},{default:w(()=>[$(" 全选 ")]),_:1},8,["checked","indeterminate"])]),_:1},8,["open"])}}}),xn=Me({__name:"createSlot",props:{isFormOpen:{type:Boolean,default:!1}},emits:["RefreshList"],setup(e,{emit:a}){const t=a,l=e,s=p(!1);Ee(()=>l.isFormOpen,c=>{s.value=c});const n={style:{width:"150px"}},i={span:14},r=xt({comment:""}),d=p(!1),h=async()=>{var u,_;d.value=!0;const c=await Vt(r.comment);((u=c==null?void 0:c.data)==null?void 0:u.status)==0?(d.value=!1,J.success("插槽创建成功"),r.comment="",t("RefreshList",{type:"add",isShow:!1})):(d.value=!1,J.error("插槽创建失败："+((_=c==null?void 0:c.data)==null?void 0:_.message)))},o=()=>{r.comment="",d.value=!1,t("RefreshList",{type:"cancel",isShow:!1})};return(c,u)=>{const _=F("a-input"),W=F("a-form"),A=F("a-modal");return b(),ee(A,{open:s.value,"onUpdate:open":u[1]||(u[1]=P=>s.value=P),title:"新建插槽","ok-text":"确定","cancel-text":"取消","confirm-loading":d.value,onOk:h,onCancel:o},{default:w(()=>[v(W,{model:r,"label-col":n,"wrapper-col":i},{default:w(()=>[v(_,{value:r.comment,"onUpdate:value":u[0]||(u[0]=P=>r.comment=P),placeholder:"请输入备注（可选）"},null,8,["value"])]),_:1},8,["model"])]),_:1},8,["open","confirm-loading"])}}}),pn={class:"content"},vn={style:{height:"100%"}},gn={key:0,class:"right-button"},yn=Me({__name:"index",setup(e){var r;const a=p(!1),t=(r=je.getUser())==null?void 0:r.admin,l=({isShow:d})=>{a.value=d},s=p(),n=p(!1),i=({isShow:d})=>{n.value=d,s.value.getLists(1)};return(d,h)=>{const o=F("a-tab-pane"),c=F("a-tabs"),u=F("a-button");return b(),M(G,null,[v(bt,null,{default:w(()=>[x("div",pn,[x("div",vn,[v(c,{activeKey:S(U)().activeKey,"onUpdate:activeKey":h[0]||(h[0]=_=>S(U)().activeKey=_),type:"card",size:"small"},{default:w(()=>[v(o,{key:"1"},{tab:w(()=>[x("span",null,[v(S(Ft)),$("设备列表 ")])]),default:w(()=>[v(la,{ref_key:"listRef",ref:s},null,512)]),_:1}),v(o,{key:"2",disabled:""},{tab:w(()=>[x("span",null,[v(S(Ue)),$("设备详情 ")])]),default:w(()=>[(b(),ee(mn,{ref:"DetailRef",key:S(U)().activeKey}))]),_:1})]),_:1},8,["activeKey"]),S(U)().activeKey==="1"?(b(),M("div",gn,[v(u,{type:"link",onClick:h[1]||(h[1]=_=>l({isShow:!0}))},{default:w(()=>[v(S(tt),{icon:S(wt),class:"icon-margin"},null,8,["icon"]),$(" 自定义 ")]),_:1}),S(t)?(b(),ee(u,{key:0,type:"link",onClick:h[2]||(h[2]=_=>i({isShow:!0}))},{default:w(()=>[v(S(tt),{icon:S(St),class:"icon-margin"},null,8,["icon"]),$(" 创建槽 ")]),_:1})):E("",!0)])):E("",!0)])])]),_:1}),v(fn,{open:a.value,onRefreshList:l},null,8,["open"]),v(xn,{isFormOpen:n.value,onRefreshList:i},null,8,["isFormOpen"])],64)}}}),zn=$e(yn,[["__scopeId","data-v-f41cf0d9"]]);export{zn as default};
